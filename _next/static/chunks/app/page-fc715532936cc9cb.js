(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{924:(e,r,t)=>{Promise.resolve().then(t.bind(t,1552))},1552:(e,r,t)=>{"use strict";t.d(r,{default:()=>c});var a=t(5155),s=t(2115),l=t(3464);class d{async fetchRows(){let e=await l.A.get(this.csvUrl);return this.parseCSV(e.data)}parseCSV(e){let r=e.split(/\r?\n/),t=r[0].split(","),a=[];for(let e=1;e<r.length;e++){var s,l,d;let n=r[e].split(",");if(n.length!==t.length)continue;let o={Producto:null!=(s=n[t.indexOf("Producto")])?s:"",Item:null!=(l=n[t.indexOf("Item")])?l:"",Cantidad:null!=(d=n[t.indexOf("Cantidad")])?d:""};a.push(o)}return a}constructor(e){this.csvUrl=e}}class n{async execute(){return await this.repo.fetchRows()}constructor(e){this.repo=e}}let o=e=>{let{isOpen:r,onClose:t,onSave:l}=e,[d,n]=(0,s.useState)("");return r?(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-900 p-6 rounded-lg shadow-lg w-full max-w-md",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Ingresa la URL del Google Sheet (CSV)"}),(0,a.jsx)("input",{type:"text",className:"w-full p-2 border border-gray-300 rounded mb-4 dark:bg-gray-800 dark:text-white",placeholder:"https://docs.google.com/spreadsheets/...",value:d,onChange:e=>n(e.target.value)}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)("button",{className:"px-4 py-2 bg-gray-300 rounded hover:bg-gray-400 dark:bg-gray-700 dark:hover:bg-gray-600",onClick:t,children:"Cancelar"}),(0,a.jsx)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:()=>{d&&l(d)},children:"Guardar"})]})]})}):null};function c(){let[e,r]=(0,s.useState)([]),[t,l]=(0,s.useState)(!1),[c,g,,i,b]=function(){let[e,r]=(0,s.useState)(sessionStorage.getItem("csvUrl")),[t,a]=(0,s.useState)(!e);return[e,t,(0,s.useCallback)(function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];a(e)},[]),(0,s.useCallback)(e=>{sessionStorage.setItem("csvUrl",e),r(e),a(!1)},[]),a]}();return(0,s.useEffect)(()=>{c&&(async()=>{l(!0);try{let e=new d(c),t=new n(e),a=await t.execute();r(a)}catch(e){sessionStorage.removeItem("csvUrl"),b(!0),r([])}finally{l(!1)}})()},[c,b]),(0,a.jsxs)("div",{className:"w-full flex flex-col items-center justify-center",children:[(0,a.jsx)(o,{isOpen:g,onClose:()=>{},onSave:i}),(0,a.jsx)("h2",{className:"font-bold mb-6 text-2xl text-center",children:"Datos de Google Sheets"}),t&&(0,a.jsx)("p",{className:"text-lg text-gray-500 dark:text-gray-400",children:"Cargando..."}),!t&&0===e.length&&(0,a.jsx)("p",{className:"text-lg text-gray-500 dark:text-gray-400",children:"No hay datos."}),!t&&e.length>0&&(0,a.jsx)("div",{className:"overflow-x-auto w-full max-w-2xl",children:(0,a.jsxs)("table",{className:"w-full border border-gray-300 dark:border-gray-700 rounded-lg shadow-lg bg-white dark:bg-gray-900 text-black dark:text-white",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"border-b border-gray-300 dark:border-gray-700 px-4 py-3 text-lg font-semibold bg-gray-100 dark:bg-gray-800",children:"Producto"}),(0,a.jsx)("th",{className:"border-b border-gray-300 dark:border-gray-700 px-4 py-3 text-lg font-semibold bg-gray-100 dark:bg-gray-800",children:"Item"}),(0,a.jsx)("th",{className:"border-b border-gray-300 dark:border-gray-700 px-4 py-3 text-lg font-semibold bg-gray-100 dark:bg-gray-800",children:"Cantidad"})]})}),(0,a.jsx)("tbody",{children:e.map((e,r)=>(0,a.jsxs)("tr",{className:r%2==0?"bg-white dark:bg-gray-900":"bg-gray-100 dark:bg-gray-800",children:[(0,a.jsx)("td",{className:"px-4 py-2 border-b border-gray-300 dark:border-gray-700 text-center",children:e.Producto}),(0,a.jsx)("td",{className:"px-4 py-2 border-b border-gray-300 dark:border-gray-700 text-center",children:e.Item}),(0,a.jsx)("td",{className:"px-4 py-2 border-b border-gray-300 dark:border-gray-700 text-center",children:e.Cantidad})]},r))})]})})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[464,441,684,358],()=>r(924)),_N_E=e.O()}]);